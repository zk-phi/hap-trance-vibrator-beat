トランスバイブレータを音で制御するマン

「Rez」初回版に同梱された幻の PS2 周辺機器「トランスバイブレータ」を、 PC の音声出力に連動させる試みです。

ダンスミュージックやアクションゲーム・映画に合わせて振動させると楽しいです。

# セットアップ

0. nodejs, npm をインストール

1. 必要なモジュールをインストール

   ```
   $ npm install
   ```

   Windows の場合、汎用の USB ドライバを署名してインストールする、みたいな作業が必要だったかもしれない (うろ覚え)。動かなかったら「libusb Windows」とかで検索。

   Mac, Linux はそのままで動くはず。

2. ステレオミキサーを設定

   PC の出力音声を入力として利用できるようにする。

   Mac の場合:

   blackhole などの仮想サウンドデバイスをいれて、

   ```
   $ brew install blackhole-16ch
   ```

   「Audio MIDI 設定」ツール (Spotlight 検索から探すのが早い) から「複数出力装置」を追加。仮想サウンドデバイスと通常の出力の両方に同時に出力するように設定。

   イヤホンやスピーカの音量を確認した上で、音声出力を「複数出力装置」に切り替えれば完了 (「複数出力装置」使用中は音量を変えられないので注意)。

3. デバイスの番号を設定

   ```
   node devices.js
   ```

   で一覧が出るので、目当てのデバイス (2. で設定した仮想デバイスなど) の id を `index.js` の

   ```
   const DEVICE_ID = 2;
   ```

   のところに設定。 Mac の場合は多分そのままで大丈夫。

3. トランスバイブレータを USB で繋いでアプリを立ち上げる

   ```
   node index.js
   ```

   音量が小さくて反応が悪い場合は

   ```
   const AMPLITUDE = 5;
   ```

   のところを大きくして調整。ゲームとか映画は 8 くらいにした方が楽しいかもしれない。

5. `Ctrl-C` で終了
