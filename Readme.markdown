トランスバイブレータを音で制御するマン

ゲーム「Rez」の初回限定版に同梱された幻の PS2 周辺機器「トランスバイブレータ」を、 PC の音声出力に連動させる試みです。

ダンスミュージックやアクションゲームに合わせて振動させると、ハプティックデバイスっぽく使えて楽しいかもしれない（？）。

# セットアップ

0. nodejs, npm をインストール

1. 必要なモジュールをインストール

   ```
   $ npm install
   ```

   Windows の場合、汎用の USB ドライバを署名してインストールする、みたいな作業が必要だったかもしれない (うろ覚え)。動かなかったら「libusb Windows」とかで検索。

   Mac, Linux はそのままで動くはず。

2. ステレオミキサーを設定

   PC の出力音声を入力として利用できるようにする (マイクなど「外部機器からの」入力に合わせて駆動したい場合は不要)。

   Mac の場合:

   blackhole などの仮想サウンドデバイスをいれて、

   ```
   $ brew install blackhole-16ch
   ```

   通常の出力 (イヤホンやスピーカー) のボリュームを確認した上で、「Audio MIDI 設定」ツール (Spotlight 検索から探すのが早い) から「複数出力装置」を追加。仮想サウンドデバイスと通常の出力の両方に同時に出力するように設定。

   音声出力を「複数出力装置」に切り替えれば完了 (遊び終わったら通常の出力に戻しておくのがおすすめ)。

3. デバイスの番号を設定

   ```
   node devices.js
   ```

   で一覧が出るので、目当てのデバイス (ステミキ、仮想サウンドデバイス) の id を `index.js` の

   ```
   const DEVICE_ID = 2;
   ```

   のところに設定。

3. トランスバイブレータを USB で繋いでアプリを立ち上げる

   ```
   node index.js
   ```

   音が小さくて反応が悪い場合は

   ```
   const AMPLITUDE = 0.25;
   ```

   のところを大きくして調整。

5. `Ctrl-C` で終了
